<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Anime Safe Viewer â€“ Strong Protection</title>

<style>
body {
  margin: 0;
  background: #0d0d0d;
  color: #fff;
  font-family: Arial, sans-serif;
}

header {
  background: #111;
  padding: 10px;
  text-align: center;
}

select {
  padding: 8px;
  font-size: 16px;
}

/* iframe */
iframe {
  width: 100%;
  height: 92vh;
  border: none;
}

/* hide ads / cookies visually */
[id*="ad"], [class*="ad"],
[id*="cookie"], [class*="cookie"],
[id*="popup"], [class*="popup"],
[id*="banner"], [class*="banner"],
[id*="overlay"], [class*="overlay"],
[id*="modal"], [class*="modal"] {
  display: none !important;
}
</style>
</head>

<body>

<header>
  <h3>Anime Safe Viewer (Redirect Protection)</h3>
  <select onchange="loadSite(this.value)">
    <option value="">Select Website</option>
    <option value="https://watchanimeworld.in/">WatchAnimeWorld</option>
    <option value="https://animesalt.top/">AnimeSalt</option>
    <option value="https://animelok.to/home">AnimeLok</option>
  </select>
</header>

<iframe
  id="viewer"
  sandbox="allow-scripts allow-forms allow-same-origin allow-pointer-lock allow-presentation"
></iframe>

<script>
const ALLOWED_DOMAINS = [
  "watchanimeworld.in",
  "animesalt.top",
  "animelok.to"
];

function isAllowed(url) {
  try {
    return ALLOWED_DOMAINS.some(d => new URL(url).hostname.includes(d));
  } catch {
    return false;
  }
}

function loadSite(url) {
  if (isAllowed(url)) {
    document.getElementById("viewer").src = url;
  }
}

/* HARD PROTECTION LOOP */
setInterval(() => {
  const iframe = document.getElementById("viewer");
  let doc;

  try {
    doc = iframe.contentDocument || iframe.contentWindow.document;
  } catch {
    return;
  }

  if (!doc) return;

  /* BLOCK NEW TAB / WINDOW */
  iframe.contentWindow.open = () => null;

  /* FORCE LINKS TO STAY INSIDE */
  doc.querySelectorAll("a[href]").forEach(a => {
    a.setAttribute("target", "_self");

    a.onclick = e => {
      const href = a.href;
      if (!isAllowed(href)) {
        e.preventDefault();   // ðŸš« BLOCK AD REDIRECT
        return false;
      }
      iframe.src = href;
      e.preventDefault();
    };
  });

  /* REMOVE SUSPICIOUS IFRAMES */
  doc.querySelectorAll("iframe").forEach(f => {
    if (!isAllowed(f.src)) f.remove();
  });

  /* BLOCK JS REDIRECTS */
  try {
    Object.defineProperty(iframe.contentWindow, "location", {
      configurable: false,
      writable: false
    });
  } catch {}

}, 1000);
</script>

</body>
</html>
